CCS PCM C Compiler, Version 4.057, 7433               24-ago-10 02:26

               Filename: mainLuces.lst

               ROM used: 443 words (5%)
                         Largest free fragment is 2048
               RAM used: 17 (5%) at main() level
                         23 (6%) worst case
               Stack:    3 locations

*
0000:  MOVLW  00
0001:  MOVWF  0A
0002:  GOTO   184
0003:  NOP
.................... #INCLUDE "C:\Archivos de programa\PICC\Devices\16f877a.h" 
.................... //////// Standard Header file for the PIC16F877A device //////////////// 
.................... #device PIC16F877A 
.................... #list 
....................  
.................... #FUSES HS,NOWDT,NOLVP,PUT,NOPROTECT 
.................... #USE delay(clock=20000000) 
*
010C:  MOVLW  2C
010D:  MOVWF  04
010E:  BCF    03.7
010F:  MOVF   00,W
0110:  BTFSC  03.2
0111:  GOTO   11F
0112:  MOVLW  06
0113:  MOVWF  78
0114:  CLRF   77
0115:  DECFSZ 77,F
0116:  GOTO   115
0117:  DECFSZ 78,F
0118:  GOTO   114
0119:  MOVLW  7B
011A:  MOVWF  77
011B:  DECFSZ 77,F
011C:  GOTO   11B
011D:  DECFSZ 00,F
011E:  GOTO   112
.................... #BYTE PORTB=0x06  
.................... #BYTE PORTD=0x08  
....................  
.................... #BIT RB0=0x06.0 
.................... #BIT RB1=0x06.1 
.................... #BIT RB2=0x06.2 
.................... #BIT RB3=0x06.3 
.................... #BIT RB4=0x06.4 
.................... #BIT RB5=0x06.5 
.................... #BIT RB6=0x06.6 
....................  
.................... #BIT RD0=0x08.0//data 
.................... #BIT RD1=0x08.1//clock 
.................... #BIT RD2=0x08.2//reset 
....................  
.................... int i,apaga=1,prende=0; 
*
018F:  MOVLW  01
0190:  BCF    03.5
0191:  MOVWF  21
0192:  CLRF   22
.................... int letpos[3]; 
.................... int const lether[5][7][5]={ 
.................... {{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0}},   //  vacio	 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  H 
.................... {{0,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  O 
.................... {{1,1,1,1,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0}},   //  L 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  A 
.................... }; 
.................... void waitjg(); 
.................... void waitletra(); 
.................... void set0(); 
.................... void set1(); 
.................... void reset(); 
.................... void fila(int let,int nu); 
.................... void letra(int let); 
....................  
.................... void main(void) 
.................... { 
*
0184:  CLRF   04
0185:  BCF    03.7
0186:  MOVLW  1F
0187:  ANDWF  03,F
0188:  BSF    03.5
0189:  BSF    1F.0
018A:  BSF    1F.1
018B:  BSF    1F.2
018C:  BCF    1F.3
018D:  MOVLW  07
018E:  MOVWF  1C
....................     long nh=0; 
*
0193:  CLRF   26
0194:  CLRF   27
.................... 	long useg1=50; 
0195:  MOVLW  32
0196:  MOVWF  28
0197:  CLRF   29
....................     int tipodeletra=1; 
0198:  MOVLW  01
0199:  MOVWF  2A
.................... 	set_tris_b(0x00);  // PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
019A:  MOVLW  00
019B:  BSF    03.5
019C:  MOVWF  06
.................... 	set_tris_d(0x00);  
019D:  MOVWF  08
....................     PORTB=0; 
019E:  BCF    03.5
019F:  CLRF   06
.................... 	PORTD=1; 
01A0:  MOVLW  01
01A1:  MOVWF  08
.................... 	while(TRUE) 
....................     {	 
.................... 			nh++;	 
01A2:  INCF   26,F
01A3:  BTFSC  03.2
01A4:  INCF   27,F
.................... 	 	if (nh<=useg1) 
01A5:  MOVF   27,W
01A6:  SUBWF  29,W
01A7:  BTFSS  03.0
01A8:  GOTO   1B2
01A9:  BTFSS  03.2
01AA:  GOTO   1AF
01AB:  MOVF   26,W
01AC:  SUBWF  28,W
01AD:  BTFSS  03.0
01AE:  GOTO   1B2
.................... 	   	    letra(tipodeletra); 
01AF:  MOVF   2A,W
01B0:  MOVWF  2B
01B1:  GOTO   120
....................      	else    
....................       	   { 
.................... 	      	nh=0; 
01B2:  CLRF   27
01B3:  CLRF   26
....................        		tipodeletra++; 
01B4:  INCF   2A,F
....................        		if (tipodeletra>4) tipodeletra=0;		  
01B5:  MOVF   2A,W
01B6:  SUBLW  04
01B7:  BTFSS  03.0
01B8:  CLRF   2A
....................       	   } 
....................      }      	 
01B9:  GOTO   1A2
.................... 	 			 
.................... } 
....................  
....................  
.................... /*   
....................  
.................... */ 
....................  
.................... void fila(int let,int nu){ 
....................      reset(); 
01BA:  SLEEP
....................      for (i=0;i<5;i++) 
*
00E4:  CLRF   20
00E5:  MOVF   20,W
00E6:  SUBLW  04
00E7:  BTFSS  03.0
00E8:  GOTO   109
.................... 		{ 
.................... 			if (lether[let][nu][i]==0) 
00E9:  MOVF   2C,W
00EA:  MOVWF  2F
00EB:  MOVLW  23
00EC:  MOVWF  30
00ED:  CALL   0BC
00EE:  MOVF   78,W
00EF:  MOVWF  2E
00F0:  MOVF   2D,W
00F1:  MOVWF  2F
00F2:  MOVLW  05
00F3:  MOVWF  30
00F4:  CALL   0BC
00F5:  MOVF   78,W
00F6:  ADDWF  2E,W
00F7:  ADDWF  20,W
00F8:  CALL   004
00F9:  XORLW  00
00FA:  BTFSS  03.2
00FB:  GOTO   102
.................... 			set0(); 
.................... 			else 
*
0101:  GOTO   107
.................... 			set1(); 
.................... 		} 
*
0107:  INCF   20,F
0108:  GOTO   0E5
.................... } 
0109:  RETLW  00
.................... void letra(int let){ 
....................  
....................      RB6=apaga; 
*
0120:  BTFSS  21.0
0121:  BCF    06.6
0122:  BTFSC  21.0
0123:  BSF    06.6
....................      fila(let,0); 
0124:  MOVF   2B,W
0125:  MOVWF  2C
0126:  CLRF   2D
0127:  CALL   0E1
....................      RB0=prende; 
0128:  BTFSS  22.0
0129:  BCF    06.0
012A:  BTFSC  22.0
012B:  BSF    06.0
....................      waitletra(); 
012C:  CALL   10A
.................... 	    
.................... 	 RB0=apaga; 
012D:  BTFSS  21.0
012E:  BCF    06.0
012F:  BTFSC  21.0
0130:  BSF    06.0
....................      fila(let,1); 
0131:  MOVF   2B,W
0132:  MOVWF  2C
0133:  MOVLW  01
0134:  MOVWF  2D
0135:  CALL   0E1
....................      RB1=prende; 
0136:  BTFSS  22.0
0137:  BCF    06.1
0138:  BTFSC  22.0
0139:  BSF    06.1
....................      waitletra(); 
013A:  CALL   10A
.................... 	    
.................... 	 RB1=apaga; 
013B:  BTFSS  21.0
013C:  BCF    06.1
013D:  BTFSC  21.0
013E:  BSF    06.1
....................      fila(let,2); 
013F:  MOVF   2B,W
0140:  MOVWF  2C
0141:  MOVLW  02
0142:  MOVWF  2D
0143:  CALL   0E1
....................      RB2=prende; 
0144:  BTFSS  22.0
0145:  BCF    06.2
0146:  BTFSC  22.0
0147:  BSF    06.2
....................      waitletra(); 
0148:  CALL   10A
.................... 	    
.................... 	 RB2=apaga; 
0149:  BTFSS  21.0
014A:  BCF    06.2
014B:  BTFSC  21.0
014C:  BSF    06.2
....................      fila(let,3); 
014D:  MOVF   2B,W
014E:  MOVWF  2C
014F:  MOVLW  03
0150:  MOVWF  2D
0151:  CALL   0E1
....................      RB3=prende; 
0152:  BTFSS  22.0
0153:  BCF    06.3
0154:  BTFSC  22.0
0155:  BSF    06.3
....................      waitletra(); 
0156:  CALL   10A
.................... 	    
.................... 	 RB3=apaga; 
0157:  BTFSS  21.0
0158:  BCF    06.3
0159:  BTFSC  21.0
015A:  BSF    06.3
....................      fila(let,4); 
015B:  MOVF   2B,W
015C:  MOVWF  2C
015D:  MOVLW  04
015E:  MOVWF  2D
015F:  CALL   0E1
....................      RB4=prende; 
0160:  BTFSS  22.0
0161:  BCF    06.4
0162:  BTFSC  22.0
0163:  BSF    06.4
....................      waitletra(); 
0164:  CALL   10A
.................... 	    
.................... 	 RB4=apaga; 
0165:  BTFSS  21.0
0166:  BCF    06.4
0167:  BTFSC  21.0
0168:  BSF    06.4
....................      fila(let,5); 
0169:  MOVF   2B,W
016A:  MOVWF  2C
016B:  MOVLW  05
016C:  MOVWF  2D
016D:  CALL   0E1
....................      RB5=prende; 
016E:  BTFSS  22.0
016F:  BCF    06.5
0170:  BTFSC  22.0
0171:  BSF    06.5
....................      waitletra(); 
0172:  CALL   10A
.................... 	    
.................... 	 RB5=apaga; 
0173:  BTFSS  21.0
0174:  BCF    06.5
0175:  BTFSC  21.0
0176:  BSF    06.5
....................      fila(let,6); 
0177:  MOVF   2B,W
0178:  MOVWF  2C
0179:  MOVLW  06
017A:  MOVWF  2D
017B:  CALL   0E1
....................      RB6=prende; 
017C:  BTFSS  22.0
017D:  BCF    06.6
017E:  BTFSC  22.0
017F:  BSF    06.6
....................      waitletra();  
0180:  CALL   10A
....................       
.................... } 
0181:  BCF    0A.3
0182:  BCF    0A.4
0183:  GOTO   1B9 (RETURN)
....................  
.................... void set0(void){ 
....................  RD0=0;//data 
*
00FC:  BCF    08.0
....................  waitjg(); 
00FD:  CALL   0B7
....................  RD1=0;//clock 
00FE:  BCF    08.1
....................  waitjg(); 
00FF:  CALL   0B7
....................  RD1=1;//clock 
0100:  BSF    08.1
.................... } 
.................... void set1(void){ 
....................  RD0=1;//data 
*
0102:  BSF    08.0
....................  waitjg(); 
0103:  CALL   0B7
....................  RD1=0;//clock 
0104:  BCF    08.1
....................  waitjg(); 
0105:  CALL   0B7
....................  RD1=1;//clock 
0106:  BSF    08.1
.................... } 
.................... void reset(void){ 
....................  //for (irst=0;irst<20;irst++)set0(); 
....................  RD2=0;//data 
*
00E1:  BCF    08.2
....................  waitjg(); 
00E2:  CALL   0B7
....................  RD2=1;//clock	 
00E3:  BSF    08.2
.................... } 
.................... void waitjg(){delay_us(2);}//delay_us(2) 
*
00B7:  MOVLW  03
00B8:  MOVWF  77
00B9:  DECFSZ 77,F
00BA:  GOTO   0B9
00BB:  RETLW  00
.................... void waitletra(){delay_ms(1);}//delay_us(500) 
*
010A:  MOVLW  01
010B:  MOVWF  2C
*
011F:  RETLW  00
....................  
....................  
.................... /* 
.................... 	 RB0=0; 
.................... 	 RB1=0; 
.................... 	 RB2=0; 
.................... 	 RB3=0; 
.................... 	 RB4=0; 
.................... 	 RB5=0; 
.................... 	 RB6=0; 
....................   RD0=1;//data 
....................   RD1=1;//clock 
....................   RD2=1;//reset 
....................  
.................... //	PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
.................... //    PORTB_TRIS = 0b00000000; //1=ENTRADA, 0=SALIDA  
....................  
....................  
.................... */ 

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT NODEBUG NOPROTECT BROWNOUT NOLVP NOCPD NOWRT
