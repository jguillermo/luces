CCS PCM C Compiler, Version 4.057, 7433               23-ago-10 21:44

               Filename: mainLuces.lst

               ROM used: 339 words (4%)
                         Largest free fragment is 2048
               RAM used: 14 (4%) at main() level
                         20 (5%) worst case
               Stack:    3 locations

*
0000:  MOVLW  00
0001:  MOVWF  0A
0002:  GOTO   118
0003:  NOP
.................... #INCLUDE "C:\Archivos de programa\PICC\Devices\16f877a.h" 
.................... //////// Standard Header file for the PIC16F877A device //////////////// 
.................... #device PIC16F877A 
.................... #list 
....................  
.................... #FUSES HS,NOWDT,NOLVP,PUT,NOPROTECT 
.................... #USE delay(clock=20000000) 
*
00A0:  MOVLW  29
00A1:  MOVWF  04
00A2:  BCF    03.7
00A3:  MOVF   00,W
00A4:  BTFSC  03.2
00A5:  GOTO   0B3
00A6:  MOVLW  06
00A7:  MOVWF  78
00A8:  CLRF   77
00A9:  DECFSZ 77,F
00AA:  GOTO   0A9
00AB:  DECFSZ 78,F
00AC:  GOTO   0A8
00AD:  MOVLW  7B
00AE:  MOVWF  77
00AF:  DECFSZ 77,F
00B0:  GOTO   0AF
00B1:  DECFSZ 00,F
00B2:  GOTO   0A6
.................... #BYTE PORTB=0x06  
.................... #BYTE PORTD=0x08  
....................  
.................... #BIT RB0=0x06.0 
.................... #BIT RB1=0x06.1 
.................... #BIT RB2=0x06.2 
.................... #BIT RB3=0x06.3 
.................... #BIT RB4=0x06.4 
.................... #BIT RB5=0x06.5 
.................... #BIT RB6=0x06.6 
....................  
....................  
.................... #BIT RD0=0x08.0//data 
.................... #BIT RD1=0x08.1//clock 
....................  
....................  
.................... void waitjg(){delay_us(2);}//delay_us(2) 
*
0073:  MOVLW  03
0074:  MOVWF  77
0075:  DECFSZ 77,F
0076:  GOTO   075
0077:  RETLW  00
.................... void waitletra(){delay_ms(1);}//delay_us(500) 
*
009E:  MOVLW  01
009F:  MOVWF  29
*
00B3:  RETLW  00
....................  
.................... int i,apaga=1,prende=0; 
*
0123:  MOVLW  01
0124:  BCF    03.5
0125:  MOVWF  21
0126:  CLRF   22
.................... int const lether[2][7][5]={ 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},  //  A 
.................... {{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0}},  //  B 
.................... }; 
.................... void set0(void){ 
....................  RD0=0;//data 
*
0090:  BCF    08.0
....................  waitjg(); 
0091:  CALL   073
....................  RD1=0;//clock 
0092:  BCF    08.1
....................  waitjg(); 
0093:  CALL   073
....................  RD1=1;//clock 
0094:  BSF    08.1
.................... } 
....................  
.................... void set1(void){ 
....................  RD0=1;//data 
*
0096:  BSF    08.0
....................  waitjg(); 
0097:  CALL   073
....................  RD1=0;//clock 
0098:  BCF    08.1
....................  waitjg(); 
0099:  CALL   073
....................  RD1=1;//clock 
009A:  BSF    08.1
.................... } 
....................  
.................... void fila(int let,int nu){ 
.................... 	 
....................      for (i=0;i<5;i++) 
*
0078:  CLRF   20
0079:  MOVF   20,W
007A:  SUBLW  04
007B:  BTFSS  03.0
007C:  GOTO   09D
.................... 		{ 
.................... 			if (lether[let][nu][i]==0) 
007D:  MOVF   29,W
007E:  MOVWF  2C
007F:  MOVLW  23
0080:  MOVWF  2D
0081:  CALL   04E
0082:  MOVF   78,W
0083:  MOVWF  2B
0084:  MOVF   2A,W
0085:  MOVWF  2C
0086:  MOVLW  05
0087:  MOVWF  2D
0088:  CALL   04E
0089:  MOVF   78,W
008A:  ADDWF  2B,W
008B:  ADDWF  20,W
008C:  CALL   004
008D:  XORLW  00
008E:  BTFSS  03.2
008F:  GOTO   096
.................... 			set0(); 
.................... 			else 
*
0095:  GOTO   09B
.................... 			set1(); 
.................... 		} 
*
009B:  INCF   20,F
009C:  GOTO   079
....................  
....................  
....................  
.................... } 
009D:  RETLW  00
.................... void letra(int let) 
.................... 	{ 
....................       
....................      RB6=apaga; 
*
00B4:  BTFSS  21.0
00B5:  BCF    06.6
00B6:  BTFSC  21.0
00B7:  BSF    06.6
....................      fila(let,0); 
00B8:  MOVF   28,W
00B9:  MOVWF  29
00BA:  CLRF   2A
00BB:  CALL   078
....................      RB0=prende; 
00BC:  BTFSS  22.0
00BD:  BCF    06.0
00BE:  BTFSC  22.0
00BF:  BSF    06.0
....................      waitletra(); 
00C0:  CALL   09E
.................... 	    
.................... 	  RB0=apaga; 
00C1:  BTFSS  21.0
00C2:  BCF    06.0
00C3:  BTFSC  21.0
00C4:  BSF    06.0
....................     fila(let,1); 
00C5:  MOVF   28,W
00C6:  MOVWF  29
00C7:  MOVLW  01
00C8:  MOVWF  2A
00C9:  CALL   078
....................      RB1=prende; 
00CA:  BTFSS  22.0
00CB:  BCF    06.1
00CC:  BTFSC  22.0
00CD:  BSF    06.1
....................      waitletra(); 
00CE:  CALL   09E
.................... 	    
.................... 	    RB1=apaga; 
00CF:  BTFSS  21.0
00D0:  BCF    06.1
00D1:  BTFSC  21.0
00D2:  BSF    06.1
....................    fila(let,2); 
00D3:  MOVF   28,W
00D4:  MOVWF  29
00D5:  MOVLW  02
00D6:  MOVWF  2A
00D7:  CALL   078
....................      RB2=prende; 
00D8:  BTFSS  22.0
00D9:  BCF    06.2
00DA:  BTFSC  22.0
00DB:  BSF    06.2
....................     waitletra(); 
00DC:  CALL   09E
.................... 	    
.................... 	    RB2=apaga; 
00DD:  BTFSS  21.0
00DE:  BCF    06.2
00DF:  BTFSC  21.0
00E0:  BSF    06.2
....................      fila(let,3); 
00E1:  MOVF   28,W
00E2:  MOVWF  29
00E3:  MOVLW  03
00E4:  MOVWF  2A
00E5:  CALL   078
....................      RB3=prende; 
00E6:  BTFSS  22.0
00E7:  BCF    06.3
00E8:  BTFSC  22.0
00E9:  BSF    06.3
....................      waitletra(); 
00EA:  CALL   09E
.................... 	    
.................... 	    RB3=apaga; 
00EB:  BTFSS  21.0
00EC:  BCF    06.3
00ED:  BTFSC  21.0
00EE:  BSF    06.3
....................      fila(let,4); 
00EF:  MOVF   28,W
00F0:  MOVWF  29
00F1:  MOVLW  04
00F2:  MOVWF  2A
00F3:  CALL   078
....................      RB4=prende; 
00F4:  BTFSS  22.0
00F5:  BCF    06.4
00F6:  BTFSC  22.0
00F7:  BSF    06.4
....................      waitletra(); 
00F8:  CALL   09E
.................... 	    
.................... 	    RB4=apaga; 
00F9:  BTFSS  21.0
00FA:  BCF    06.4
00FB:  BTFSC  21.0
00FC:  BSF    06.4
....................      fila(let,5); 
00FD:  MOVF   28,W
00FE:  MOVWF  29
00FF:  MOVLW  05
0100:  MOVWF  2A
0101:  CALL   078
....................      RB5=prende; 
0102:  BTFSS  22.0
0103:  BCF    06.5
0104:  BTFSC  22.0
0105:  BSF    06.5
....................    waitletra(); 
0106:  CALL   09E
.................... 	    
.................... 	    RB5=apaga; 
0107:  BTFSS  21.0
0108:  BCF    06.5
0109:  BTFSC  21.0
010A:  BSF    06.5
....................      fila(let,6); 
010B:  MOVF   28,W
010C:  MOVWF  29
010D:  MOVLW  06
010E:  MOVWF  2A
010F:  CALL   078
....................      RB6=prende; 
0110:  BTFSS  22.0
0111:  BCF    06.6
0112:  BTFSC  22.0
0113:  BSF    06.6
....................    waitletra();  
0114:  CALL   09E
....................   
.................... 	    
.................... } 
0115:  BCF    0A.3
0116:  BCF    0A.4
0117:  GOTO   14B (RETURN)
....................  
....................  
....................  
....................  
....................  
.................... void main(void) 
.................... { 
0118:  CLRF   04
0119:  BCF    03.7
011A:  MOVLW  1F
011B:  ANDWF  03,F
011C:  BSF    03.5
011D:  BSF    1F.0
011E:  BSF    1F.1
011F:  BSF    1F.2
0120:  BCF    1F.3
0121:  MOVLW  07
0122:  MOVWF  1C
....................  
.................... long nh=0; 
*
0127:  CLRF   23
0128:  CLRF   24
.................... 	long useg1=50; 
0129:  MOVLW  32
012A:  MOVWF  25
012B:  CLRF   26
.................... int tipodeletra=0; 
012C:  CLRF   27
.................... 	 
.................... 	set_tris_b(0x00); 
012D:  MOVLW  00
012E:  BSF    03.5
012F:  MOVWF  06
.................... 	set_tris_d(0x00); 
0130:  MOVWF  08
.................... //	PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
.................... //    PORTB_TRIS = 0b00000000; //1=ENTRADA, 0=SALIDA  
.................... 	 RB0=0; 
0131:  BCF    03.5
0132:  BCF    06.0
.................... 	 RB1=0; 
0133:  BCF    06.1
.................... 	 RB2=0; 
0134:  BCF    06.2
.................... 	 RB3=0; 
0135:  BCF    06.3
.................... 	 RB4=0; 
0136:  BCF    06.4
.................... 	 RB5=0; 
0137:  BCF    06.5
.................... 	 RB6=0; 
0138:  BCF    06.6
....................   RD0=1;//data 
0139:  BSF    08.0
....................   RD1=1;//clock 
013A:  BSF    08.1
....................    
.................... 	while(TRUE) 
.................... {	 
.................... 		nh++;	 
013B:  INCF   23,F
013C:  BTFSC  03.2
013D:  INCF   24,F
.................... 		 
.................... 	 if (nh<=useg1) 
013E:  MOVF   24,W
013F:  SUBWF  26,W
0140:  BTFSS  03.0
0141:  GOTO   14C
0142:  BTFSS  03.2
0143:  GOTO   148
0144:  MOVF   23,W
0145:  SUBWF  25,W
0146:  BTFSS  03.0
0147:  GOTO   14C
.................... 	   {  
....................        letra(tipodeletra); 
0148:  MOVF   27,W
0149:  MOVWF  28
014A:  GOTO   0B4
.................... 	   } 
....................      else    
014B:  GOTO   151
....................        { 
....................        tipodeletra++; 
014C:  INCF   27,F
....................        if (tipodeletra>1) tipodeletra=0; 
014D:  MOVF   27,W
014E:  SUBLW  01
014F:  BTFSS  03.0
0150:  CLRF   27
....................         
....................         
....................        }	 
....................  }      	 
0151:  GOTO   13B
.................... 	 			 
.................... 	} 
....................  
....................  
....................  
....................  
....................  
....................  
....................  
....................  
....................  
....................  
0152:  SLEEP

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT NODEBUG NOPROTECT BROWNOUT NOLVP NOCPD NOWRT
