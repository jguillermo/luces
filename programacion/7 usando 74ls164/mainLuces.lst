CCS PCM C Compiler, Version 4.057, 7433               26-ago-10 03:37

               Filename: mainLuces.lst

               ROM used: 423 words (5%)
                         Largest free fragment is 2048
               RAM used: 21 (6%) at main() level
                         24 (7%) worst case
               Stack:    3 locations

*
0000:  MOVLW  00
0001:  MOVWF  0A
0002:  GOTO   161
0003:  NOP
.................... #INCLUDE "C:\Archivos de programa\PICC\Devices\16f877a.h" 
.................... //////// Standard Header file for the PIC16F877A device //////////////// 
.................... #device PIC16F877A 
.................... #list 
....................  
.................... #FUSES HS,NOWDT,NOLVP,PUT,NOPROTECT 
.................... #USE delay(clock=20000000) 
*
00F7:  MOVLW  2D
00F8:  MOVWF  04
00F9:  BCF    03.7
00FA:  MOVF   00,W
00FB:  BTFSC  03.2
00FC:  GOTO   10A
00FD:  MOVLW  06
00FE:  MOVWF  78
00FF:  CLRF   77
0100:  DECFSZ 77,F
0101:  GOTO   100
0102:  DECFSZ 78,F
0103:  GOTO   0FF
0104:  MOVLW  7B
0105:  MOVWF  77
0106:  DECFSZ 77,F
0107:  GOTO   106
0108:  DECFSZ 00,F
0109:  GOTO   0FD
.................... #BYTE PORTB=0x06  
.................... #BYTE PORTD=0x08  
....................  
.................... #BIT RB0=0x06.0 
.................... #BIT RB1=0x06.1 
.................... #BIT RB2=0x06.2 
.................... #BIT RB3=0x06.3 
.................... #BIT RB4=0x06.4 
.................... #BIT RB5=0x06.5 
.................... #BIT RB6=0x06.6 
....................  
.................... #BIT RD0=0x08.0//data 
.................... #BIT RD1=0x08.1//clock 
.................... #BIT RD2=0x08.2//reset 
....................  
.................... int i,j,apaga=1,prende=0; 
*
016C:  MOVLW  01
016D:  BCF    03.5
016E:  MOVWF  22
016F:  CLRF   23
.................... int letpos[3]={0,1,2}; 
0170:  CLRF   24
0171:  MOVWF  25
0172:  MOVLW  02
0173:  MOVWF  26
.................... int const lether[4][7][5]={ 
.................... {{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0}},   //  vacio	 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  A 
.................... {{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0}},   //  B 
.................... {{0,1,1,1,0},{1,0,0,0,1},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,1},{0,1,1,1,0}},   //  C 
....................  
....................  
.................... }; 
.................... void waitjg(); 
.................... void waitletra(); 
.................... void set0(); 
.................... void set1(); 
.................... void reset(); 
.................... void fila(int let,int nu); 
.................... void letrero(); 
....................  
.................... void main(void) 
.................... { 
*
0161:  CLRF   04
0162:  BCF    03.7
0163:  MOVLW  1F
0164:  ANDWF  03,F
0165:  BSF    03.5
0166:  BSF    1F.0
0167:  BSF    1F.1
0168:  BSF    1F.2
0169:  BCF    1F.3
016A:  MOVLW  07
016B:  MOVWF  1C
....................     long nh=0; 
*
0174:  CLRF   27
0175:  CLRF   28
.................... 	long useg1=50; 
0176:  MOVLW  32
0177:  MOVWF  29
0178:  CLRF   2A
.................... 	int aux,iaux; 
.................... 	set_tris_b(0x00);  // PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
0179:  MOVLW  00
017A:  BSF    03.5
017B:  MOVWF  06
.................... 	set_tris_d(0x00);  
017C:  MOVWF  08
....................     PORTB=0; 
017D:  BCF    03.5
017E:  CLRF   06
.................... 	PORTD=1; 
017F:  MOVLW  01
0180:  MOVWF  08
.................... 	reset(); 
0181:  GOTO   099
.................... 	while(TRUE) 
....................     {	 
.................... 			nh++;	 
0182:  INCF   27,F
0183:  BTFSC  03.2
0184:  INCF   28,F
.................... 	 	if (nh<=useg1) 
0185:  MOVF   28,W
0186:  SUBWF  2A,W
0187:  BTFSS  03.0
0188:  GOTO   18F
0189:  BTFSS  03.2
018A:  GOTO   18E
018B:  MOVF   27,W
018C:  SUBWF  29,W
018D:  BTFSC  03.0
.................... 	   	    letrero(); 
018E:  GOTO   10B
....................      	else    
....................       	   {nh=0; 
018F:  CLRF   28
0190:  CLRF   27
.................... 	      	aux=letpos[0]; 
0191:  MOVF   24,W
0192:  MOVWF  2B
.................... 	      	for(iaux=0;iaux<3;iaux++) 
0193:  CLRF   2C
0194:  MOVF   2C,W
0195:  SUBLW  02
0196:  BTFSS  03.0
0197:  GOTO   1A5
.................... 	      		{ aux++; 
0198:  INCF   2B,F
.................... 	      	 	  if (aux==5)aux=0; 
0199:  MOVF   2B,W
019A:  SUBLW  05
019B:  BTFSC  03.2
019C:  CLRF   2B
.................... 			      letpos[iaux]=aux;		      	 
019D:  MOVLW  24
019E:  ADDWF  2C,W
019F:  MOVWF  04
01A0:  BCF    03.7
01A1:  MOVF   2B,W
01A2:  MOVWF  00
.................... 	      	    }      	    	  
01A3:  INCF   2C,F
01A4:  GOTO   194
....................       	   } 
....................      }      	 
01A5:  GOTO   182
.................... 	 			 
.................... } 
....................  
....................  
.................... /*   
....................  
.................... */ 
....................  
.................... void fila(int nu){ 
....................    //  reset(); 
01A6:  SLEEP
....................    for  (i=0;i<3;i++) 
*
00C4:  CLRF   20
00C5:  MOVF   20,W
00C6:  SUBLW  02
00C7:  BTFSS  03.0
00C8:  GOTO   0F4
....................     { 
....................      for (j=0;j<5;j++) 
00C9:  CLRF   21
00CA:  MOVF   21,W
00CB:  SUBLW  04
00CC:  BTFSS  03.0
00CD:  GOTO   0F2
.................... 		{ 
.................... 			if (lether[letpos[i]][nu][j]==0) 
00CE:  MOVLW  24
00CF:  ADDWF  20,W
00D0:  MOVWF  04
00D1:  BCF    03.7
00D2:  MOVF   00,W
00D3:  MOVWF  30
00D4:  MOVLW  23
00D5:  MOVWF  31
00D6:  CALL   09F
00D7:  MOVF   78,W
00D8:  MOVWF  2F
00D9:  MOVF   2D,W
00DA:  MOVWF  30
00DB:  MOVLW  05
00DC:  MOVWF  31
00DD:  CALL   09F
00DE:  MOVF   78,W
00DF:  ADDWF  2F,W
00E0:  ADDWF  21,W
00E1:  CALL   004
00E2:  XORLW  00
00E3:  BTFSS  03.2
00E4:  GOTO   0EB
.................... 			set0(); 
.................... 			else 
*
00EA:  GOTO   0F0
.................... 			set1(); 
.................... 		} 
*
00F0:  INCF   21,F
00F1:  GOTO   0CA
....................     } 
00F2:  INCF   20,F
00F3:  GOTO   0C5
.................... } 
00F4:  RETLW  00
.................... void letrero(){ 
....................  
....................      RB6=apaga; 
*
010B:  BTFSS  22.0
010C:  BCF    06.6
010D:  BTFSC  22.0
010E:  BSF    06.6
....................      fila(0); 
010F:  CLRF   2D
0110:  CALL   0C4
....................      RB0=prende; 
0111:  BTFSS  23.0
0112:  BCF    06.0
0113:  BTFSC  23.0
0114:  BSF    06.0
....................      waitletra(); 
0115:  CALL   0F5
.................... 	    
.................... 	 RB0=apaga; 
0116:  BTFSS  22.0
0117:  BCF    06.0
0118:  BTFSC  22.0
0119:  BSF    06.0
....................      fila(1); 
011A:  MOVLW  01
011B:  MOVWF  2D
011C:  CALL   0C4
....................      RB1=prende; 
011D:  BTFSS  23.0
011E:  BCF    06.1
011F:  BTFSC  23.0
0120:  BSF    06.1
....................      waitletra(); 
0121:  CALL   0F5
.................... 	    
.................... 	 RB1=apaga; 
0122:  BTFSS  22.0
0123:  BCF    06.1
0124:  BTFSC  22.0
0125:  BSF    06.1
....................      fila(2); 
0126:  MOVLW  02
0127:  MOVWF  2D
0128:  CALL   0C4
....................      RB2=prende; 
0129:  BTFSS  23.0
012A:  BCF    06.2
012B:  BTFSC  23.0
012C:  BSF    06.2
....................      waitletra(); 
012D:  CALL   0F5
.................... 	    
.................... 	 RB2=apaga; 
012E:  BTFSS  22.0
012F:  BCF    06.2
0130:  BTFSC  22.0
0131:  BSF    06.2
....................      fila(3); 
0132:  MOVLW  03
0133:  MOVWF  2D
0134:  CALL   0C4
....................      RB3=prende; 
0135:  BTFSS  23.0
0136:  BCF    06.3
0137:  BTFSC  23.0
0138:  BSF    06.3
....................      waitletra(); 
0139:  CALL   0F5
.................... 	    
.................... 	 RB3=apaga; 
013A:  BTFSS  22.0
013B:  BCF    06.3
013C:  BTFSC  22.0
013D:  BSF    06.3
....................      fila(4); 
013E:  MOVLW  04
013F:  MOVWF  2D
0140:  CALL   0C4
....................      RB4=prende; 
0141:  BTFSS  23.0
0142:  BCF    06.4
0143:  BTFSC  23.0
0144:  BSF    06.4
....................      waitletra(); 
0145:  CALL   0F5
.................... 	    
.................... 	 RB4=apaga; 
0146:  BTFSS  22.0
0147:  BCF    06.4
0148:  BTFSC  22.0
0149:  BSF    06.4
....................      fila(5); 
014A:  MOVLW  05
014B:  MOVWF  2D
014C:  CALL   0C4
....................      RB5=prende; 
014D:  BTFSS  23.0
014E:  BCF    06.5
014F:  BTFSC  23.0
0150:  BSF    06.5
....................      waitletra(); 
0151:  CALL   0F5
.................... 	    
.................... 	 RB5=apaga; 
0152:  BTFSS  22.0
0153:  BCF    06.5
0154:  BTFSC  22.0
0155:  BSF    06.5
....................      fila(6); 
0156:  MOVLW  06
0157:  MOVWF  2D
0158:  CALL   0C4
....................      RB6=prende; 
0159:  BTFSS  23.0
015A:  BCF    06.6
015B:  BTFSC  23.0
015C:  BSF    06.6
....................      waitletra();  
015D:  CALL   0F5
....................       
.................... } 
015E:  BCF    0A.3
015F:  BCF    0A.4
0160:  GOTO   1A5 (RETURN)
....................  
.................... void set0(void){ 
....................  RD0=0;//data 
*
00E5:  BCF    08.0
....................  waitjg(); 
00E6:  CALL   094
....................  RD1=0;//clock 
00E7:  BCF    08.1
....................  waitjg(); 
00E8:  CALL   094
....................  RD1=1;//clock 
00E9:  BSF    08.1
.................... } 
.................... void set1(void){ 
....................  RD0=1;//data 
*
00EB:  BSF    08.0
....................  waitjg(); 
00EC:  CALL   094
....................  RD1=0;//clock 
00ED:  BCF    08.1
....................  waitjg(); 
00EE:  CALL   094
....................  RD1=1;//clock 
00EF:  BSF    08.1
.................... } 
.................... void reset(void){ 
....................  //for (irst=0;irst<20;irst++)set0(); 
....................  RD2=0;//data 
*
0099:  BCF    08.2
....................  waitjg(); 
009A:  CALL   094
....................  RD2=1;//clock	 
009B:  BSF    08.2
.................... } 
009C:  BCF    0A.3
009D:  BCF    0A.4
009E:  GOTO   182 (RETURN)
.................... void waitjg(){delay_us(2);}//delay_us(2) 
*
0094:  MOVLW  03
0095:  MOVWF  77
0096:  DECFSZ 77,F
0097:  GOTO   096
0098:  RETLW  00
.................... void waitletra(){delay_ms(1);}//delay_us(500) 
*
00F5:  MOVLW  01
00F6:  MOVWF  2D
*
010A:  RETLW  00
....................  
....................  
.................... /* 
.................... 	 RB0=0; 
.................... 	 RB1=0; 
.................... 	 RB2=0; 
.................... 	 RB3=0; 
.................... 	 RB4=0; 
.................... 	 RB5=0; 
.................... 	 RB6=0; 
....................   RD0=1;//data 
....................   RD1=1;//clock 
....................   RD2=1;//reset 
....................  
.................... //	PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
.................... //    PORTB_TRIS = 0b00000000; //1=ENTRADA, 0=SALIDA  
....................  
....................  
....................  
....................  
....................  
.................... int lether[30][7][5]={ 
.................... {{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0}},   //  vacio	 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  A 
.................... {{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0}},   //  B 
.................... {{0,1,1,1,0},{1,0,0,0,1},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,1},{0,1,1,1,0}},   //  C 
.................... {{1,1,1,1,0},{0,1,0,0,1},{0,1,0,0,1},{0,1,0,0,1},{0,1,0,0,1},{0,1,0,0,1},{1,1,1,1,0}},   //  D 
.................... {{1,1,1,1,1},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,1}},   //  E 
.................... {{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,1}},   //  F 
.................... {{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,0,1,1,0},{1,0,0,0,0},{1,0,0,0,1},{0,1,1,1,0}},   //  G 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  H 
.................... {{1,1,1,1,1},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{1,1,1,1,1}},   //  I 
.................... {{0,1,0,0,0},{1,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{1,1,1,1,1}},   //  J 
.................... {{1,0,0,0,1},{1,0,0,1,0},{1,0,1,0,0},{1,1,0,0,0},{1,0,1,0,0},{1,0,0,1,0},{1,0,0,0,1}},   //  K 
.................... {{1,1,1,1,1},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0}},   //  L 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,1,0,1},{1,1,0,1,1},{1,1,0,1,1},{1,0,0,0,1}},   //  M 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,1,1},{1,0,1,0,1},{1,1,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  N 
.................... {{1,0,0,0,1},{1,0,0,0,1},{1,0,0,1,1},{1,0,1,0,1},{1,1,0,0,1},{0,0,0,0,0},{0,1,1,1,0}},   //  Ñ 
.................... {{0,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  O 
.................... {{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0}},   //  P 
.................... {{0,1,1,1,1},{1,0,0,1,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{0,1,1,1,0}},   //  Q 
.................... {{1,0,0,0,1},{1,0,0,1,0},{1,0,1,0,0},{1,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,1,1,1,0}},   //  R 
.................... {{1,1,0,1,0},{0,0,0,0,1},{0,0,0,0,1},{0,1,1,1,0},{1,0,0,0,0},{1,0,0,0,1},{0,1,1,1,0}},   //  S 
.................... {{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{1,1,1,1,1}},   //  T 
.................... {{0,1,1,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  U 
.................... {{0,0,1,0,0},{0,0,1,0,0},{0,1,0,1,0},{0,1,0,1,0},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  V 
.................... {{1,0,0,0,1},{1,1,0,1,1},{1,0,1,0,1},{1,0,1,0,1},{1,0,0,0,1},{1,0,0,0,1},{1,0,0,0,1}},   //  W 
.................... {{1,0,0,0,1},{1,0,0,0,1},{0,1,0,1,0},{0,0,1,0,0},{0,1,0,1,0},{1,0,0,0,1},{1,0,0,0,1}},   //  X 
.................... {{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,0,1,0,0},{0,1,0,1,0},{1,0,0,0,1},{1,0,0,0,1}},   //  Y 
.................... {{1,1,1,1,1},{1,0,0,0,0},{0,1,0,0,0},{0,0,1,0,0},{0,0,0,1,0},{0,0,0,0,1},{1,1,1,1,1}}    //  Z 
.................... }; 
....................  
....................  
....................  
....................  
.................... */ 

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT NODEBUG NOPROTECT BROWNOUT NOLVP NOCPD NOWRT
