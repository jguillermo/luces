CCS PCM C Compiler, Version 4.057, 7433               24-ago-10 03:11

               Filename: mainLuces.lst

               ROM used: 484 words (6%)
                         Largest free fragment is 2048
               RAM used: 18 (5%) at main() level
                         23 (6%) worst case
               Stack:    3 locations

*
0000:  MOVLW  00
0001:  MOVWF  0A
0002:  GOTO   184
0003:  NOP
.................... #INCLUDE "C:\Archivos de programa\PICC\Devices\16f877a.h" 
.................... //////// Standard Header file for the PIC16F877A device //////////////// 
.................... #device PIC16F877A 
.................... #list 
....................  
.................... #FUSES HS,NOWDT,NOLVP,PUT,NOPROTECT 
.................... #USE delay(clock=20000000) 
*
011A:  MOVLW  2C
011B:  MOVWF  04
011C:  BCF    03.7
011D:  MOVF   00,W
011E:  BTFSC  03.2
011F:  GOTO   12D
0120:  MOVLW  06
0121:  MOVWF  78
0122:  CLRF   77
0123:  DECFSZ 77,F
0124:  GOTO   123
0125:  DECFSZ 78,F
0126:  GOTO   122
0127:  MOVLW  7B
0128:  MOVWF  77
0129:  DECFSZ 77,F
012A:  GOTO   129
012B:  DECFSZ 00,F
012C:  GOTO   120
.................... #BYTE PORTB=0x06  
.................... #BYTE PORTD=0x08  
....................  
.................... #BIT RB0=0x06.0 
.................... #BIT RB1=0x06.1 
.................... #BIT RB2=0x06.2 
.................... #BIT RB3=0x06.3 
.................... #BIT RB4=0x06.4 
.................... #BIT RB5=0x06.5 
.................... #BIT RB6=0x06.6 
....................  
.................... #BIT RD0=0x08.0//data 
.................... #BIT RD1=0x08.1//clock 
.................... #BIT RD2=0x08.2//reset 
....................  
.................... int i,j,apaga=1,prende=0; 
*
018F:  MOVLW  01
0190:  BCF    03.5
0191:  MOVWF  22
0192:  CLRF   23
.................... int letpos[3]={0,1,2}; 
0193:  CLRF   24
0194:  MOVWF  25
0195:  MOVLW  02
0196:  MOVWF  26
.................... int const lether[5][7][5]={ 
.................... {{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0},{0,0,0,0,0}},   //  vacio	 
.................... {{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0}},   //   H 
.................... {{0,1,1,0,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}},   //   O 
.................... {{1,1,1,1,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0},{1,0,0,0,0}},   //   L 
.................... {{1,0,0,1,0},{1,0,0,1,0},{1,0,0,1,0},{1,1,1,1,0},{1,0,0,1,0},{1,0,0,1,0},{0,1,1,0,0}}   //   A  
.................... }; 
.................... void waitjg(); 
.................... void waitletra(); 
.................... void set0(); 
.................... void set1(); 
.................... void reset(); 
.................... void fila(int let,int nu); 
.................... void letrero(); 
....................  
.................... void main(void) 
.................... { 
*
0184:  CLRF   04
0185:  BCF    03.7
0186:  MOVLW  1F
0187:  ANDWF  03,F
0188:  BSF    03.5
0189:  BSF    1F.0
018A:  BSF    1F.1
018B:  BSF    1F.2
018C:  BCF    1F.3
018D:  MOVLW  07
018E:  MOVWF  1C
....................     long nh=0; 
*
0197:  CLRF   27
0198:  CLRF   28
.................... 	long useg1=50; 
0199:  MOVLW  32
019A:  MOVWF  29
019B:  CLRF   2A
.................... 	int aux; 
.................... 	set_tris_b(0x00);  // PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
019C:  MOVLW  00
019D:  BSF    03.5
019E:  MOVWF  06
.................... 	set_tris_d(0x00);  
019F:  MOVWF  08
....................     PORTB=0; 
01A0:  BCF    03.5
01A1:  CLRF   06
.................... 	PORTD=1; 
01A2:  MOVLW  01
01A3:  MOVWF  08
.................... 	reset(); 
01A4:  GOTO   0BC
.................... 	while(TRUE) 
....................     {	 
.................... 			nh++;	 
01A5:  INCF   27,F
01A6:  BTFSC  03.2
01A7:  INCF   28,F
.................... 	 	if (nh<=useg1) 
01A8:  MOVF   28,W
01A9:  SUBWF  2A,W
01AA:  BTFSS  03.0
01AB:  GOTO   1B2
01AC:  BTFSS  03.2
01AD:  GOTO   1B1
01AE:  MOVF   27,W
01AF:  SUBWF  29,W
01B0:  BTFSC  03.0
.................... 	   	    letrero(); 
01B1:  GOTO   12E
....................      	else    
....................       	   {nh=0; 
01B2:  CLRF   28
01B3:  CLRF   27
.................... 	      	aux=letpos[0]; 
01B4:  MOVF   24,W
01B5:  MOVWF  2B
.................... 	      	     if (aux==0) 
01B6:  MOVF   2B,F
01B7:  BTFSS  03.2
01B8:  GOTO   1C0
.................... 	      	     	letpos[0]=1,letpos[1]=2,letpos[2]=3; 
01B9:  MOVLW  01
01BA:  MOVWF  24
01BB:  MOVLW  02
01BC:  MOVWF  25
01BD:  MOVLW  03
01BE:  MOVWF  26
.................... 	      	     else if (aux==1) 
01BF:  GOTO   1E2
01C0:  DECFSZ 2B,W
01C1:  GOTO   1C9
.................... 	      	     	letpos[0]=2,letpos[1]=3,letpos[2]=4; 
01C2:  MOVLW  02
01C3:  MOVWF  24
01C4:  MOVLW  03
01C5:  MOVWF  25
01C6:  MOVLW  04
01C7:  MOVWF  26
.................... 	      	     else if (aux==2) 
01C8:  GOTO   1E2
01C9:  MOVF   2B,W
01CA:  SUBLW  02
01CB:  BTFSS  03.2
01CC:  GOTO   1D3
.................... 	      	     	letpos[0]=3,letpos[1]=4,letpos[2]=0; 
01CD:  MOVLW  03
01CE:  MOVWF  24
01CF:  MOVLW  04
01D0:  MOVWF  25
01D1:  CLRF   26
.................... 	             else if (aux==3) 
01D2:  GOTO   1E2
01D3:  MOVF   2B,W
01D4:  SUBLW  03
01D5:  BTFSS  03.2
01D6:  GOTO   1DD
.................... 	      	     	letpos[0]=4,letpos[1]=0,letpos[2]=1;  
01D7:  MOVLW  04
01D8:  MOVWF  24
01D9:  CLRF   25
01DA:  MOVLW  01
01DB:  MOVWF  26
.................... 	      	     else 
01DC:  GOTO   1E2
.................... 	      	     	letpos[0]=0,letpos[1]=1,letpos[2]=2; 	  
01DD:  CLRF   24
01DE:  MOVLW  01
01DF:  MOVWF  25
01E0:  MOVLW  02
01E1:  MOVWF  26
....................       	   } 
....................      }      	 
01E2:  GOTO   1A5
.................... 	 			 
.................... } 
....................  
....................  
.................... /*   
....................  
.................... */ 
....................  
.................... void fila(int nu){ 
....................    //  reset(); 
01E3:  SLEEP
....................    for  (i=0;i<3;i++) 
*
00E7:  CLRF   20
00E8:  MOVF   20,W
00E9:  SUBLW  02
00EA:  BTFSS  03.0
00EB:  GOTO   117
....................     { 
....................      for (j=0;j<5;j++) 
00EC:  CLRF   21
00ED:  MOVF   21,W
00EE:  SUBLW  04
00EF:  BTFSS  03.0
00F0:  GOTO   115
.................... 		{ 
.................... 			if (lether[letpos[i]][nu][j]==0) 
00F1:  MOVLW  24
00F2:  ADDWF  20,W
00F3:  MOVWF  04
00F4:  BCF    03.7
00F5:  MOVF   00,W
00F6:  MOVWF  2F
00F7:  MOVLW  23
00F8:  MOVWF  30
00F9:  CALL   0C2
00FA:  MOVF   78,W
00FB:  MOVWF  2E
00FC:  MOVF   2C,W
00FD:  MOVWF  2F
00FE:  MOVLW  05
00FF:  MOVWF  30
0100:  CALL   0C2
0101:  MOVF   78,W
0102:  ADDWF  2E,W
0103:  ADDWF  21,W
0104:  CALL   004
0105:  XORLW  00
0106:  BTFSS  03.2
0107:  GOTO   10E
.................... 			set0(); 
.................... 			else 
*
010D:  GOTO   113
.................... 			set1(); 
.................... 		} 
*
0113:  INCF   21,F
0114:  GOTO   0ED
....................     } 
0115:  INCF   20,F
0116:  GOTO   0E8
.................... } 
0117:  RETLW  00
.................... void letrero(){ 
....................  
....................      RB6=apaga; 
*
012E:  BTFSS  22.0
012F:  BCF    06.6
0130:  BTFSC  22.0
0131:  BSF    06.6
....................      fila(0); 
0132:  CLRF   2C
0133:  CALL   0E7
....................      RB0=prende; 
0134:  BTFSS  23.0
0135:  BCF    06.0
0136:  BTFSC  23.0
0137:  BSF    06.0
....................      waitletra(); 
0138:  CALL   118
.................... 	    
.................... 	 RB0=apaga; 
0139:  BTFSS  22.0
013A:  BCF    06.0
013B:  BTFSC  22.0
013C:  BSF    06.0
....................      fila(1); 
013D:  MOVLW  01
013E:  MOVWF  2C
013F:  CALL   0E7
....................      RB1=prende; 
0140:  BTFSS  23.0
0141:  BCF    06.1
0142:  BTFSC  23.0
0143:  BSF    06.1
....................      waitletra(); 
0144:  CALL   118
.................... 	    
.................... 	 RB1=apaga; 
0145:  BTFSS  22.0
0146:  BCF    06.1
0147:  BTFSC  22.0
0148:  BSF    06.1
....................      fila(2); 
0149:  MOVLW  02
014A:  MOVWF  2C
014B:  CALL   0E7
....................      RB2=prende; 
014C:  BTFSS  23.0
014D:  BCF    06.2
014E:  BTFSC  23.0
014F:  BSF    06.2
....................      waitletra(); 
0150:  CALL   118
.................... 	    
.................... 	 RB2=apaga; 
0151:  BTFSS  22.0
0152:  BCF    06.2
0153:  BTFSC  22.0
0154:  BSF    06.2
....................      fila(3); 
0155:  MOVLW  03
0156:  MOVWF  2C
0157:  CALL   0E7
....................      RB3=prende; 
0158:  BTFSS  23.0
0159:  BCF    06.3
015A:  BTFSC  23.0
015B:  BSF    06.3
....................      waitletra(); 
015C:  CALL   118
.................... 	    
.................... 	 RB3=apaga; 
015D:  BTFSS  22.0
015E:  BCF    06.3
015F:  BTFSC  22.0
0160:  BSF    06.3
....................      fila(4); 
0161:  MOVLW  04
0162:  MOVWF  2C
0163:  CALL   0E7
....................      RB4=prende; 
0164:  BTFSS  23.0
0165:  BCF    06.4
0166:  BTFSC  23.0
0167:  BSF    06.4
....................      waitletra(); 
0168:  CALL   118
.................... 	    
.................... 	 RB4=apaga; 
0169:  BTFSS  22.0
016A:  BCF    06.4
016B:  BTFSC  22.0
016C:  BSF    06.4
....................      fila(5); 
016D:  MOVLW  05
016E:  MOVWF  2C
016F:  CALL   0E7
....................      RB5=prende; 
0170:  BTFSS  23.0
0171:  BCF    06.5
0172:  BTFSC  23.0
0173:  BSF    06.5
....................      waitletra(); 
0174:  CALL   118
.................... 	    
.................... 	 RB5=apaga; 
0175:  BTFSS  22.0
0176:  BCF    06.5
0177:  BTFSC  22.0
0178:  BSF    06.5
....................      fila(6); 
0179:  MOVLW  06
017A:  MOVWF  2C
017B:  CALL   0E7
....................      RB6=prende; 
017C:  BTFSS  23.0
017D:  BCF    06.6
017E:  BTFSC  23.0
017F:  BSF    06.6
....................      waitletra();  
0180:  CALL   118
....................       
.................... } 
0181:  BCF    0A.3
0182:  BCF    0A.4
0183:  GOTO   1E2 (RETURN)
....................  
.................... void set0(void){ 
....................  RD0=0;//data 
*
0108:  BCF    08.0
....................  waitjg(); 
0109:  CALL   0B7
....................  RD1=0;//clock 
010A:  BCF    08.1
....................  waitjg(); 
010B:  CALL   0B7
....................  RD1=1;//clock 
010C:  BSF    08.1
.................... } 
.................... void set1(void){ 
....................  RD0=1;//data 
*
010E:  BSF    08.0
....................  waitjg(); 
010F:  CALL   0B7
....................  RD1=0;//clock 
0110:  BCF    08.1
....................  waitjg(); 
0111:  CALL   0B7
....................  RD1=1;//clock 
0112:  BSF    08.1
.................... } 
.................... void reset(void){ 
....................  //for (irst=0;irst<20;irst++)set0(); 
....................  RD2=0;//data 
*
00BC:  BCF    08.2
....................  waitjg(); 
00BD:  CALL   0B7
....................  RD2=1;//clock	 
00BE:  BSF    08.2
.................... } 
00BF:  BCF    0A.3
00C0:  BCF    0A.4
00C1:  GOTO   1A5 (RETURN)
.................... void waitjg(){delay_us(2);}//delay_us(2) 
*
00B7:  MOVLW  03
00B8:  MOVWF  77
00B9:  DECFSZ 77,F
00BA:  GOTO   0B9
00BB:  RETLW  00
.................... void waitletra(){delay_ms(1);}//delay_us(500) 
*
0118:  MOVLW  01
0119:  MOVWF  2C
*
012D:  RETLW  00
....................  
....................  
.................... /* 
.................... 	 RB0=0; 
.................... 	 RB1=0; 
.................... 	 RB2=0; 
.................... 	 RB3=0; 
.................... 	 RB4=0; 
.................... 	 RB5=0; 
.................... 	 RB6=0; 
....................   RD0=1;//data 
....................   RD1=1;//clock 
....................   RD2=1;//reset 
....................  
.................... //	PORTA_TRIS = 0b11000000; //1=ENTRADA, 0=SALIDA  
.................... //    PORTB_TRIS = 0b00000000; //1=ENTRADA, 0=SALIDA  
....................  
....................  
.................... */ 

Configuration Fuses:
   Word  1: 3F72   HS NOWDT PUT NODEBUG NOPROTECT BROWNOUT NOLVP NOCPD NOWRT
